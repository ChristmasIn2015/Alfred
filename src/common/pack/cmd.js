var E=Object.defineProperty;var g=e=>E(e,"__esModule",{value:!0});var T=(e,i)=>{for(var t in i)E(e,t,{get:i[t],enumerable:!0})};g(exports);T(exports,{excuteCmd:()=>a,killCmd:()=>m});var n;(function(e){e.WHITE="white",e.GREEN="green",e.YELLOW="yellow",e.RED="red"})(n||(n={}));function a(e,i){if(e=e.replace(/\n/g," "),h(e)){let s=global.$common.getFullTime().full;i({pid:null,text:`@Node(${process.pid}) Danger Cmd: ${e}`,html:d(n.RED,`@Node(${process.pid}) Danger Cmd: ${e}`,s)});return}let t=require("child_process").exec(e,{maxBuffer:1024*1024*1024},(s,c,$)=>{let l=`@Node(${process.pid}) Cmd(${t.pid})`,p=global.$common.getFullTime().full,r={pid:null,text:`${l} Task end`,html:d(n.GREEN,l,`${l} Task end`,p)};s?(r.text=`${l} Command error:${s.message}`,r.html=d(n.RED,l,r.text,p)):$&&(r.text=`${l} Task error:${$.message}`,r.html=d(n.RED,l,r.text,p)),i(r)}),u="latin1";t.stdout.setEncoding(u);let o="utf8",f=`@Node(${process.pid}) Cmd(${t.pid}) Task start\uFF1A${u}=>${o}`,x=require("iconv-lite");return i({pid:t.pid,text:f,html:d(n.GREEN,f)}),t.stdout.on("data",s=>{let c=x.decode(Buffer.from(`@Log(${t.pid}) ${s}`,u),o);i({pid:t.pid,text:c,html:d(n.WHITE,c)}),s.includes("Merge conflict")&&m(t.pid)}),t.pid}function m(e){require("tree-kill")(e)}function h(e){e=e.trim().toUpperCase();let i=!1;return e.length===0&&(i=!0),e.indexOf("SSH")>=0&&(i=!0),i}function d(e,...i){let t="";return i.forEach(u=>t+=`<div style="color:${e}">${u}</div>`),t}
