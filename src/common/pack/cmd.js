var m=Object.defineProperty;var g=e=>m(e,"__esModule",{value:!0});var a=(e,i)=>{g(e);for(var t in i)m(e,t,{get:i[t],enumerable:!0})};a(exports,{excuteCmd:()=>b,killCmd:()=>x});var n;(function(e){e.WHITE="white",e.GREEN="green",e.YELLOW="yellow",e.RED="red"})(n||(n={}));function b(e,i){if(e=e.replace(/\n/g," "),h(e)){let l=global.$common.getFullTime().full;i({pid:null,text:`@Node(${process.pid}) Danger Cmd: ${e}`,html:d(n.RED,`@Node(${process.pid}) Danger Cmd: ${e}`,l)});return}let t=require("child_process").exec(e,{maxBuffer:1024*1024*1024},(l,u,$)=>{let r=`@Node(${process.pid}) Cmd(${t.pid})`,c=global.$common.getFullTime().full,s={pid:null,text:`${r} \u4EFB\u52A1\u7ED3\u675F`,html:d(n.GREEN,r,"",c)};l?(s.text=`${r} \u8FDB\u7A0B\u5F02\u5E38:${l.message}`,s.html=d(n.RED,r,s.text,c)):$&&(s.text=`${r} \u4EFB\u52A1\u5F02\u5E38:${$.message}`,s.html=d(n.RED,r,s.text,c)),i(s)}),p="latin1";t.stdout.setEncoding(t.stdout.readableEncoding);let o="utf8",f=`@Node(${process.pid}) Cmd(${t.pid}) ${p}=>${o}:Start`,E=require("iconv-lite");return i({pid:t.pid,text:f,html:d(n.GREEN,f)}),t.stdout.on("data",l=>{let u=E.decode(Buffer.from(`@Log(${t.pid}) ${l}`,p),o);i({pid:t.pid,text:u,html:d(n.WHITE,u)}),l.includes("Merge conflict")&&x(t.pid)}),t.pid}function x(e){require("tree-kill")(e)}function h(e){e=e.trim().toUpperCase();let i=!1;return e.length===0&&(i=!0),e.indexOf("SSH")>=0&&(i=!0),i}function d(e,...i){let t="";return i.forEach(p=>t+=`<span style="color:${e}">${p}</sapn><br>`),t}
