var E=Object.defineProperty;var g=e=>E(e,"__esModule",{value:!0});var a=(e,i)=>{for(var t in i)E(e,t,{get:i[t],enumerable:!0})};g(exports);a(exports,{excuteCmd:()=>T,killCmd:()=>m});var n;(function(e){e.WHITE="white",e.GREEN="green",e.YELLOW="yellow",e.RED="red"})(n||(n={}));function T(e,i){if(e=e.replace(/\n/g," "),h(e)){let l=global.$common.getFullTime().full;i({pid:null,text:`@Node(${process.pid}) Danger Cmd: ${e}`,html:d(n.RED,`@Node(${process.pid}) Danger Cmd: ${e}`,l)});return}let t=require("child_process").exec(e,{maxBuffer:1024*1024*1024},(l,c,$)=>{let s=`@Node(${process.pid}) Cmd(${t.pid})`,p=global.$common.getFullTime().full,r={pid:null,text:`${s} Task end`,html:d(n.GREEN,s,"",p)};l?(r.text=`${s} Command error:${l.message}`,r.html=d(n.RED,s,r.text,p)):$&&(r.text=`${s} Task error:${$.message}`,r.html=d(n.RED,s,r.text,p)),i(r)}),u="latin1";t.stdout.setEncoding(t.stdout.readableEncoding);let o="utf8",f=`@Node(${process.pid}) Cmd(${t.pid}) Start\uFF1A${u}=>${o}`,x=require("iconv-lite");return i({pid:t.pid,text:f,html:d(n.GREEN,f)}),t.stdout.on("data",l=>{let c=x.decode(Buffer.from(`@Log(${t.pid}) ${l}`,u),o);i({pid:t.pid,text:c,html:d(n.WHITE,c)}),l.includes("Merge conflict")&&m(t.pid)}),t.pid}function m(e){require("tree-kill")(e)}function h(e){e=e.trim().toUpperCase();let i=!1;return e.length===0&&(i=!0),e.indexOf("SSH")>=0&&(i=!0),i}function d(e,...i){let t="";return i.forEach(u=>t+=`<span style="color:${e}">${u}</sapn><br>`),t}
