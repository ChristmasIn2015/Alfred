var x=Object.create,u=Object.defineProperty,B=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,k=Object.getOwnPropertyNames,C=Object.getOwnPropertyDescriptor;var A=n=>u(n,"__esModule",{value:!0});var L=(n,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of k(e))!E.call(n,r)&&r!=="default"&&u(n,r,{get:()=>e[r],enumerable:!(t=C(e,r))||t.enumerable});return n},I=n=>n&&n.__esModule?n:L(A(u(n!=null?x(B(n)):{},"default",{value:n,enumerable:!0})),n);var g=class{constructor(){this.isDebug=!0}toggleDebug(){this.isDebug=!this.isDebug}async log(e){try{this.isDebug&&await global.$common.fetch("http://wqao.top/yjy-log/create","POST",{message:e})}catch(t){console.log(t)}}},f=g;var m=I(require("axios")),w;(function(n){n.GET="GET",n.POST="POST"})(w||(w={}));var T=class{constructor(e,t){this.BASE_URL=e;this.COMPLETE=t;this.DEFAULT_HEADER={};this.BASE_URL=e,this.COMPLETE=t}async request(e,t,r,s){try{let o=await m.default({method:e,url:this.BASE_URL+(t||""),data:r,headers:s||this.DEFAULT_HEADER||{}});return await this.COMPLETE(o.data)}catch(o){throw o}}},d=class{constructor(){}getRequester(e,t){return new T(e,t)}async fetch(e,t,r,s){return(await m.default({method:t,url:e,data:r,headers:s})).data}},$=d;var h=class{constructor(){}getTimeDTO(){return{year:"",month:"",day:"",hour:"",min:"",sec:"",full:"",week:""}}getYYMMDD(e=Date.now()){let t="";return new Date(e).toLocaleDateString().split("/").forEach(r=>t+=Number(r)<10?`/0${r}`:`/${r}`),t.replace("/","")}getYY(e=Date.now()){return new Date(e).getFullYear().toString()}getMM(e=Date.now()){let t=new Date(e).getMonth()+1;return(t<10?`0${t}`:t).toString()}getDD(e=Date.now()){let t=new Date(e).getDate();return(t<10?`0${t}`:t).toString()}getHHMMSS(e=Date.now()){let t=null,r=new Date(e);return t=this.getTimeDTO(),t.hour=r.getHours()<10?`0${r.getHours()}`:r.getHours().toString(),t.min=r.getMinutes()<10?`0${r.getMinutes()}`:r.getMinutes().toString(),t.sec=r.getSeconds()<10?`0${r.getSeconds()}`:r.getSeconds().toString(),t.full=`${t.hour}:${t.min}:${t.sec}`,t}getFullTime(e=Date.now()){let t=this.getHHMMSS();return t.year=new Date(e).getFullYear().toString(),t.full=`${this.getYYMMDD(e)} ${t.full}`,t}getTimeGap(e=Date.now()+864e5){let t=null,r=e-Date.now();if(r>0){t=this.getTimeDTO();let s=~~(r/1e3/60/60)%24;t.hour=s<10?`0${s}`:s.toString();let o=~~(r/1e3/60)%60;t.min=o<10?`0${o}`:o.toString();let i=~~(r/1e3)%60;t.sec=i<10?`0${i}`:i.toString(),t.full=`${t.hour}:${t.min}:${t.sec}`}return t}getChineseWeek(e=Date.now()){let t="";switch(new Date(e).getDay()){case 1:t="\u5468\u4E00";break;case 2:t="\u5468\u4E8C";break;case 3:t="\u5468\u4E09";break;case 4:t="\u5468\u56DB";break;case 5:t="\u5468\u4E94";break;case 6:t="\u5468\u516D";break;case 0:t="\u5468\u65E5";break}return t}},M=h;var p=class{constructor(){}isValidMobile(e){return/^[1][0-9]{10}$/.test(e)}isValidEmail(e){return/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]+$/.test(e)}},O=p;var b=class{constructor(){}getLatLngDistance(e,t,r,s){let o=e*Math.PI/180,i=r*Math.PI/180,l=o-i,a=t*Math.PI/180-s*Math.PI/180,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(o)*Math.cos(i)*Math.pow(Math.sin(a/2),2)));return c=c*6378.137,c=Math.round(c*1e4)/1e4,c.toFixed(2)}wannaObject(e,t){return e}},v=b;var y=class{constructor(){this.BinderMap=new Map;this.bindClass(this,"Log",f),this.bindClass(this,"Requester",$),this.bindClass(this,"UtilsTime",M),this.bindClass(this,"UtilsVaild",O),this.bindClass(this,"UtilsCalculation",v)}bindClass(e,t,r){r instanceof Function&&(e.BinderMap.set(t,new r),Object.getOwnPropertyNames(r.prototype).forEach(s=>{s!=="constructor"&&(e[s]=(...o)=>{let i=e.BinderMap.get(t);return i[s].apply(i,o)})}))}};var D=class{constructor(){this.IPv4=null;this.IPv4=this.getIPv4()}AlfredLogin(){let e=this.IPv4;return(t,r,s)=>{let o=s.value;s.value=async function(...i){let l=i[0],a=i[1];try{let c=await global.$common.fetch(`http://${e}:80/alfred/user/info`,"POST",null,{authorization:l.header("authorization")});if(c.code!==200)throw new Error(`${c.message}(code:${c.code})`);await o.apply(this,i)}catch(c){a.send({code:null,data:null,message:`\u767B\u5F55\u4FE1\u606F\u5F02\u5E38: ${c.message}`})}}}}Response(e=""){return(t,r,s)=>{let o=s.value;s.value=async function(...i){let l={code:null,data:null,message:""};try{let a=await o.apply(this,i);l.code=200,l.data=a||e}catch(a){l.message=a.message||a}finally{i[1].send(l)}}}}WsAlfredLogin(){let e=this.IPv4;return(t,r,s)=>{let o=s.value;s.value=async function(...i){let l=i[0];try{let a=await global.$common.fetch(`http://${e}:80/alfred/user/info`,"POST",null,{authorization:l.DTO.authorization});if(a.code!==200)throw new Error(`${a.message}`);if(a.data._id!=="6038744a70d56c2988731d69")throw new Error("\u60A8\u4E0D\u662F\u7BA1\u7406\u5458");await o.apply(this,i)}catch(a){l.orderName="/request/authorization",l.DTO=a.message||a||"\u60A8\u7684\u6743\u9650\u4E0D\u8DB3",global.Cabin.websocketAnswer(l)}}}}WsResponse(e="",t=!1){return(r,s,o)=>{let i=o.value;o.value=async function(...l){let a=l[0];try{let c=await i.apply(this,l);a.DTO=c||e||null}catch(c){a.orderName="/request/fail",a.DTO=c.message||c}finally{t?global.Cabin.websocketBoardCast(a):global.Cabin.websocketAnswer(a)}}}}ElectronResponse(e=""){return(t,r,s)=>{let o=s.value;s.value=async function(...i){let l={code:null,data:null,message:""};try{let a=await o.apply(this,i);l.code=200,l.data=a||e}catch(a){l.message=a.message||a}finally{return l}}}}getIPv4(){let e=null;if(global.process.platform==="win32"){let t=require("os").networkInterfaces();for(let r in t)if(r==="\u4EE5\u592A\u7F51"||r==="WLAN"){for(let s in t[r]){let o=t[r][s];if(o.family==="IPv4"){e=o.address;break}}break}}return e}printRed(e){console.log(`[41m[30m${e}[0m`)}printYellow(e){console.log(`[43m[30m${e}[0m`)}printBlue(e){console.log(`[44m[37m${e}[0m`)}printGreen(e){console.log(`[42m[30m${e}[0m`)}printLink(e){console.log(`[34m${e}[0m`)}printText(e){console.log(`[33m${e}[0m`)}},P=D;var S=class extends y{constructor(){super();this.bindClass(this,"UtilsReactNode",P)}};global.$common=new S;
