var x=Object.create,u=Object.defineProperty,B=Object.getPrototypeOf,E=Object.prototype.hasOwnProperty,k=Object.getOwnPropertyNames,A=Object.getOwnPropertyDescriptor;var C=s=>u(s,"__esModule",{value:!0});var L=(s,e,t)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of k(e))!E.call(s,r)&&r!=="default"&&u(s,r,{get:()=>e[r],enumerable:!(t=A(e,r))||t.enumerable});return s},I=s=>s&&s.__esModule?s:L(C(u(s!=null?x(B(s)):{},"default",{value:s,enumerable:!0})),s);var g=class{constructor(){this.isDebug=!0}toggleDebug(){this.isDebug=!this.isDebug}async log(e){try{this.isDebug&&await global.$common.fetch("http://10.52.2.35/yjy-log/create","POST",{message:e})}catch(t){console.log(t)}}},y=g;var m=I(require("axios")),w;(function(s){s.GET="GET",s.POST="POST"})(w||(w={}));var T=class{constructor(e,t){this.BASE_URL=e;this.COMPLETE=t;this.DEFAULT_HEADER={};this.BASE_URL=e,this.COMPLETE=t}async request(e,t,r,n){try{let o=await m.default({method:e,url:this.BASE_URL+(t||""),data:r,headers:n||this.DEFAULT_HEADER||{}});return await this.COMPLETE(o.data)}catch(o){throw o}}},h=class{constructor(){}getRequester(e,t){return new T(e,t)}async fetch(e,t,r,n){return(await m.default({method:t,url:e,data:r,headers:n})).data}},$=h;var d=class{constructor(){}getTimeDTO(){return{year:"",month:"",day:"",hour:"",min:"",sec:"",full:"",week:""}}getYYMMDD(e=Date.now()){let t="";return new Date(e).toLocaleDateString().split("/").forEach(r=>t+=Number(r)<10?`/0${r}`:`/${r}`),t.replace("/","")}getYY(e=Date.now()){return new Date(e).getFullYear().toString()}getMM(e=Date.now()){let t=new Date(e).getMonth()+1;return(t<10?`0${t}`:t).toString()}getDD(e=Date.now()){let t=new Date(e).getDate();return(t<10?`0${t}`:t).toString()}getHHMMSS(e=Date.now()){let t=null,r=new Date(e);return t=this.getTimeDTO(),t.hour=r.getHours()<10?`0${r.getHours()}`:r.getHours().toString(),t.min=r.getMinutes()<10?`0${r.getMinutes()}`:r.getMinutes().toString(),t.sec=r.getSeconds()<10?`0${r.getSeconds()}`:r.getSeconds().toString(),t.full=`${t.hour}:${t.min}:${t.sec}`,t}getFullTime(e=Date.now()){let t=this.getHHMMSS();return t.year=new Date(e).getFullYear().toString(),t.full=`${this.getYYMMDD(e)} ${t.full}`,t}getTimeGap(e=Date.now()+864e5){let t=null,r=e-Date.now();if(r>0){t=this.getTimeDTO();let n=~~(r/1e3/60/60)%24;t.hour=n<10?`0${n}`:n.toString();let o=~~(r/1e3/60)%60;t.min=o<10?`0${o}`:o.toString();let a=~~(r/1e3)%60;t.sec=a<10?`0${a}`:a.toString(),t.full=`${t.hour}:${t.min}:${t.sec}`}return t}getChineseWeek(e=Date.now()){let t="";switch(new Date(e).getDay()){case 1:t="\u5468\u4E00";break;case 2:t="\u5468\u4E8C";break;case 3:t="\u5468\u4E09";break;case 4:t="\u5468\u56DB";break;case 5:t="\u5468\u4E94";break;case 6:t="\u5468\u516D";break;case 0:t="\u5468\u65E5";break}return t}},M=d;var p=class{constructor(){}isValidMobile(e){return/^[1][0-9]{10}$/.test(e)}isValidEmail(e){return/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]+$/.test(e)}},O=p;var b=class{constructor(){}getLatLngDistance(e,t,r,n){let o=e*Math.PI/180,a=r*Math.PI/180,l=o-a,i=t*Math.PI/180-n*Math.PI/180,c=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(o)*Math.cos(a)*Math.pow(Math.sin(i/2),2)));return c=c*6378.137,c=Math.round(c*1e4)/1e4,c.toFixed(2)}wannaObject(e,t){return e}},P=b;var D=class{constructor(){this.BinderMap=new Map;this.bindClass(this,"Log",y),this.bindClass(this,"Requester",$),this.bindClass(this,"UtilsTime",M),this.bindClass(this,"UtilsVaild",O),this.bindClass(this,"UtilsCalculation",P)}bindClass(e,t,r){r instanceof Function&&(e.BinderMap.set(t,new r),Object.getOwnPropertyNames(r.prototype).forEach(n=>{n!=="constructor"&&(e[n]=(...o)=>{let a=e.BinderMap.get(t);return a[n].apply(a,o)})}))}};var f=class{constructor(){this.IPv4=null;this.IPv4=this.getIPv4()}AlfredLogin(){let e=this.IPv4;return(t,r,n)=>{let o=n.value;n.value=async function(...a){let l=a[0],i=a[1];try{let c=await global.$common.fetch(`http://${e}:80/alfred/user/info`,"POST",null,{authorization:l.header("authorization")});if(c.code!==200)throw new Error(`${c.message}(code:${c.code})`);await o.apply(this,a)}catch(c){i.send({code:null,data:null,message:`\u767B\u5F55\u4FE1\u606F\u5F02\u5E38: ${c.message}`})}}}}Response(e=""){return(t,r,n)=>{let o=n.value;n.value=async function(...a){let l={code:null,data:null,message:""};try{let i=await o.apply(this,a);l.code=200,l.data=i||e}catch(i){l.message=i.message||i}finally{a[1].send(l)}}}}WsAlfredLogin(){let e=this.IPv4;return(t,r,n)=>{let o=n.value;n.value=async function(...a){let l=a[0];try{let i=await global.$common.fetch(`http://${e}:80/alfred/user/info`,"POST",null,{authorization:l.DTO.authorization});if(i.code!==200)throw new Error(`${i.message}`);if(i.data._id!=="6038744a70d56c2988731d69")throw new Error("\u60A8\u4E0D\u662F\u7BA1\u7406\u5458");await o.apply(this,a)}catch(i){l.orderName="/request/authorization",l.DTO=i.message||i||"\u60A8\u7684\u6743\u9650\u4E0D\u8DB3",global.Cabin.websocketAnswer(l)}}}}WsResponse(e=""){return(t,r,n)=>{let o=n.value;n.value=async function(...a){let l=a[0];try{let i=await o.apply(this,a);l.DTO=i||e||null}catch(i){l.orderName="/request/fail",l.DTO=i.message||i}finally{global.Cabin.websocketAnswer(l)}}}}getIPv4(){let e=null;if(global.process.platform==="win32"){let t=require("os").networkInterfaces();for(let r in t)if(r==="\u4EE5\u592A\u7F51"||r==="WLAN"){for(let n in t[r]){let o=t[r][n];if(o.family==="IPv4"){e=o.address;break}}break}}return e}printRed(e){console.log(`[41m[30m${e}[0m`)}printYellow(e){console.log(`[43m[30m${e}[0m`)}printBlue(e){console.log(`[44m[37m${e}[0m`)}printGreen(e){console.log(`[42m[30m${e}[0m`)}printLink(e){console.log(`[34m${e}[0m`)}printText(e){console.log(`[33m${e}[0m`)}},v=f;var S=class extends D{constructor(){super();this.bindClass(this,"UtilsReactNode",v)}};global.$common=new S;
